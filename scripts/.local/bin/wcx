#!/bin/bash
# -*- mode: sh; -*-

# wc{l,c}: short script which makes getting the line or byte count of a
# command's result take fewer keystrokes. ex.: "wcl pacman -Qq" => 2014

__Usage() {
    >&2 echo "Usage: ${0##*/} [CMD] || [FILE]..."
    exit $EXIT_FAILURE
}

if [[ $# == 0 ]]; then __Usage; fi

case ${0##*/} in
    "wcc")
	wcop="-c";;
    "wcm")
	wcop="-m";;
    "wcl")
	wcop="-l";;
    "wcw")
	wcop="-w";;
    *)
	__Usage;;
esac

while [[ $# -gt 0 ]];
do
    # If it's a path to a file, give the size of that instead (and all after).
    if [[ -f $1 || $files ]]; then
	files+="$1 "
    else
	cmd+="$1 "
    fi
    shift
done

if [[ ! $files ]]; then
    eval "$cmd | wc $wcop"
else
    eval "wc $wcop $files"
fi
